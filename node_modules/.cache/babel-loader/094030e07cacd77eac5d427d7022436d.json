{"remainingRequest":"D:\\Java Project\\Vue\\vuemanage\\node_modules\\babel-loader\\lib\\index.js!D:\\Java Project\\Vue\\vuemanage\\src\\util\\request.js","dependencies":[{"path":"D:\\Java Project\\Vue\\vuemanage\\src\\util\\request.js","mtime":1609381621113},{"path":"D:\\Java Project\\Vue\\vuemanage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Java Project\\Vue\\vuemanage\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF90aGlzID0gdGhpczsKCmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgY29va2llIGZyb20gJy4uL3V0aWwvY29va2llJzsgLy8gY29uc3QgcXMgPSByZXF1aXJlKCdxcycpOwovLyBpbXBvcnQgeyAgTWVzc2FnZSB9IGZyb20gJ2VsZW1lbnQtdWknCi8vIGNyZWF0ZSBhbiBheGlvcyBpbnN0YW5jZQoKdmFyIHNlcnZpY2UgPSBheGlvcy5jcmVhdGUoewogIGJhc2VVUkw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEksCiAgLy8gdXJsID0gYmFzZSB1cmwgKyByZXF1ZXN0IHVybAogIHRpbWVvdXQ6IDMwMDAwMCAvLyByZXF1ZXN0IHRpbWVvdXQKCn0pOyAvLyByZXF1ZXN0IGludGVyY2VwdG9yCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgLy8gZG8gc29tZXRoaW5nIGJlZm9yZSByZXF1ZXN0IGlzIHNlbnQKICAvLyBjb25zb2xlLmxvZyhjb29raWUuZ2V0Q29va2llKCJ0b2tlbiIpKQogIGlmIChjb29raWUuZ2V0Q29va2llKCJ0b2tlbiIpKSB7CiAgICAvLyBsZXQgZWFjaCByZXF1ZXN0IGNhcnJ5IHRva2VuCiAgICAvLyBbJ1gtVG9rZW4nXSBpcyBhIGN1c3RvbSBoZWFkZXJzIGtleQogICAgLy8gcGxlYXNlIG1vZGlmeSBpdCBhY2NvcmRpbmcgdG8gdGhlIGFjdHVhbCBzaXR1YXRpb24KICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSAiYmVhcmVyICIgKyBjb29raWUuZ2V0Q29va2llKCJ0b2tlbiIpOwogIH0gLy8gaWYoY29uZmlnLm1ldGhvZD09PSdwb3N0JykKICAvLyB7CiAgLy8gY29uZmlnLmRhdGEgPSBxcy5zdHJpbmdpZnkoY29uZmlnLmRhdGEpCiAgLy8gfQoKCiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgLy8gZG8gc29tZXRoaW5nIHdpdGggcmVxdWVzdCBlcnJvcgogIGNvbnNvbGUubG9nKGVycm9yKTsgLy8gZm9yIGRlYnVnCgogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgaWYgKHJlc3BvbnNlLmNvZGUgPT0gNDAxKSB7CiAgICBfdGhpcy4kbm90aWZ5LmVycm9yKHsKICAgICAgdGl0bGU6ICfplJnor68nLAogICAgICBtZXNzYWdlOiAn55m75b2V6L+H5pyfJwogICAgfSk7CgogICAgX3RoaXMuY29va2llLmNsZWFyQ29va2llKCJ0b2tlbiIpOwoKICAgIF90aGlzLmNvb2tpZS5jbGVhckNvb2tpZSgidXNlck5hbWUiKTsKCiAgICBfdGhpcy4kcm91dGVyLnB1c2goewogICAgICBwYXRoOiAnL0xvZ2luJwogICAgfSk7CiAgfQoKICB2YXIgcmVzID0gcmVzcG9uc2UuZGF0YTsgLy8gaWYgdGhlIGN1c3RvbSBjb2RlIGlzIG5vdCAyMDAwMCwgaXQgaXMganVkZ2VkIGFzIGFuIGVycm9yLgoKICByZXR1cm4gcmVzOwp9KTsKZXhwb3J0IGRlZmF1bHQgc2VydmljZTs="},{"version":3,"sources":["D:/Java Project/Vue/vuemanage/src/util/request.js"],"names":["axios","cookie","service","create","baseURL","process","env","VUE_APP_BASE_API","timeout","interceptors","request","use","config","getCookie","headers","Authorization","error","console","log","Promise","reject","response","code","$notify","title","message","clearCookie","$router","push","path","res","data"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,gBAAnB,C,CACA;AACA;AAGA;;AACA,IAAMC,OAAO,GAAGF,KAAK,CAACG,MAAN,CAAa;AAC3BC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,gBADM;AACY;AACvCC,EAAAA,OAAO,EAAE,MAFkB,CAEX;;AAFW,CAAb,CAAhB,C,CAKA;;AACAN,OAAO,CAACO,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CACE,UAAAC,MAAM,EAAI;AACR;AAGA;AAEA,MAAIX,MAAM,CAACY,SAAP,CAAiB,OAAjB,CAAJ,EAA+B;AAC7B;AACA;AACA;AACAD,IAAAA,MAAM,CAACE,OAAP,CAAeC,aAAf,GAA+B,YAAYd,MAAM,CAACY,SAAP,CAAiB,OAAjB,CAA3C;AACD,GAXO,CAYR;AACA;AACA;AACA;;;AAEA,SAAOD,MAAP;AACD,CAnBH,EAoBE,UAAAI,KAAK,EAAI;AACP;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ,EAFO,CAEY;;AACnB,SAAOG,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,CAxBH;AA2BAd,OAAO,CAACO,YAAR,CAAqBY,QAArB,CAA8BV,GAA9B,CAEE,UAAAU,QAAQ,EAAI;AACV,MAAIA,QAAQ,CAACC,IAAT,IAAiB,GAArB,EAA0B;AACxB,IAAA,KAAI,CAACC,OAAL,CAAaP,KAAb,CAAmB;AACjBQ,MAAAA,KAAK,EAAE,IADU;AAEjBC,MAAAA,OAAO,EAAE;AAFQ,KAAnB;;AAIA,IAAA,KAAI,CAACxB,MAAL,CAAYyB,WAAZ,CAAwB,OAAxB;;AACA,IAAA,KAAI,CAACzB,MAAL,CAAYyB,WAAZ,CAAwB,UAAxB;;AACA,IAAA,KAAI,CAACC,OAAL,CAAaC,IAAb,CAAkB;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAlB;AACD;;AAED,MAAMC,GAAG,GAAGT,QAAQ,CAACU,IAArB,CAXU,CAaV;;AACA,SAAOD,GAAP;AACD,CAjBH;AAqBA,eAAe5B,OAAf","sourcesContent":["import axios from 'axios'\r\nimport cookie from '../util/cookie'\r\n// const qs = require('qs');\r\n// import {  Message } from 'element-ui'\r\n\r\n\r\n// create an axios instance\r\nconst service = axios.create({\r\n  baseURL: process.env.VUE_APP_BASE_API, // url = base url + request url\r\n  timeout: 300000 // request timeout\r\n})\r\n\r\n// request interceptor\r\nservice.interceptors.request.use(\r\n  config => {\r\n    // do something before request is sent\r\n\r\n\r\n    // console.log(cookie.getCookie(\"token\"))\r\n\r\n    if (cookie.getCookie(\"token\")) {\r\n      // let each request carry token\r\n      // ['X-Token'] is a custom headers key\r\n      // please modify it according to the actual situation\r\n      config.headers.Authorization = \"bearer \" + cookie.getCookie(\"token\")\r\n    }\r\n    // if(config.method==='post')\r\n    // {\r\n    // config.data = qs.stringify(config.data)\r\n    // }\r\n\r\n    return config\r\n  },\r\n  error => {\r\n    // do something with request error\r\n    console.log(error) // for debug\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\nservice.interceptors.response.use(\r\n\r\n  response => {\r\n    if (response.code == 401) {\r\n      this.$notify.error({\r\n        title: '错误',\r\n        message: '登录过期'\r\n      });\r\n      this.cookie.clearCookie(\"token\");\r\n      this.cookie.clearCookie(\"userName\");\r\n      this.$router.push({ path: '/Login' })\r\n    }\r\n\r\n    const res = response.data\r\n\r\n    // if the custom code is not 20000, it is judged as an error.\r\n    return res\r\n  },\r\n)\r\n\r\n\r\nexport default service"]}]}